<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vibe Coding: Transforma el Aprendizaje con IA</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" xintegrity="sha512-Fo3rlrZj/k7ujTnHg4CGR2D7kSs0V4LLanw2qksYuRlEzO+tcaEPQogQ0KaoGN26/zrn20ImR1DfuLWnOo7aBA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0f4f8; /* Light background */
            color: #334155; /* Dark grey text */
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 1.5rem;
        }
        .section-card {
            background-color: #ffffff;
            border-radius: 0.75rem; /* rounded-xl */
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05); /* shadow-xl */
            padding: 2rem;
            margin-bottom: 2rem;
        }
        .btn-primary {
            background-color: #3b82f6; /* blue-500 */
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem; /* rounded-lg */
            font-weight: 600;
            transition: background-color 0.2s ease-in-out;
        }
        .btn-primary:hover {
            background-color: #2563eb; /* blue-600 */
        }
        .btn-outline {
            background-color: transparent;
            color: #3b82f6; /* blue-500 */
            border: 2px solid #3b82f6;
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            font-weight: 600;
            transition: all 0.2s ease-in-out;
        }
        .btn-outline:hover {
            background-color: #e0f2fe; /* blue-50 */
            color: #2563eb;
        }
        .quiz-option-btn {
            background-color: #e2e8f0; /* slate-200 */
            color: #334155;
            padding: 1rem;
            border-radius: 0.5rem;
            font-weight: 500;
            text-align: left;
            width: 100%;
            transition: background-color 0.2s ease-in-out, transform 0.1s ease-in-out;
            border: 2px solid transparent;
        }
        .quiz-option-btn:hover {
            background-color: #cbd5e1; /* slate-300 */
            transform: translateY(-2px);
        }
        .quiz-option-btn.selected {
            border-color: #3b82f6; /* blue-500 */
            background-color: #bfdbfe; /* blue-200 */
        }
        .quiz-option-btn.correct {
            background-color: #d1fae5; /* green-100 */
            border-color: #10b981; /* green-500 */
            color: #065f46; /* green-800 */
        }
        .quiz-option-btn.incorrect {
            background-color: #fee2e2; /* red-100 */
            border-color: #ef4444; /* red-500 */
            color: #991b1b; /* red-800 */
        }
        .video-container {
            position: relative;
            width: 100%;
            padding-bottom: 56.25%; /* 16:9 Aspect Ratio */
            height: 0;
            overflow: hidden;
            border-radius: 0.75rem;
        }
        .video-container iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: 0;
            border-radius: 0.75rem;
        }

        /* Styles for the feedback popup */
        #feedback-popup {
            background-color: rgba(0, 0, 0, 0.4); /* Semi-transparent overlay */
            transition: opacity 0.3s ease-in-out;
        }
        #popup-content {
            background-color: #ffffff;
            padding: 2.5rem;
            border-radius: 1.5rem; /* More rounded */
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04); /* Stronger shadow */
            min-width: 250px;
            text-align: center;
        }
        .feedback-popup-visible #popup-content {
            animation: fadeInScale 0.3s forwards;
        }
        .feedback-popup-hidden #popup-content {
            animation: fadeOutScale 0.3s forwards;
        }
        @keyframes fadeInScale {
            from {
                opacity: 0;
                transform: scale(0.8);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }
        @keyframes fadeOutScale {
            from {
                opacity: 1;
                transform: scale(1);
            }
            to {
                opacity: 0;
                transform: scale(0.8);
            }
        }
        .reference-item {
            margin-bottom: 1rem;
            padding-left: 1.5rem;
            text-indent: -1.5rem;
        }
    </style>
</head>
<body class="antialiased">
    <header class="bg-gradient-to-r from-blue-600 to-purple-700 text-white py-16 shadow-lg">
        <div class="container text-center">
            <h1 class="text-5xl md:text-6xl font-extrabold leading-tight mb-4">Vibe Coding: Transforma el Aprendizaje con IA</h1>
            <p class="text-xl md:text-2xl font-light opacity-90">Empodera a educadores y desarrolladores para crear experiencias de aprendizaje interactivas y personalizadas.</p>
        </div>
    </header>

    <main class="container py-12">

        <section id="proposito-aprendizaje" class="section-card bg-blue-50 border-l-4 border-blue-500">
            <h2 class="text-3xl font-bold text-blue-800 mb-4">Propósito de Aprendizaje</h2>
            <p class="text-lg text-blue-700 leading-relaxed">
                Al finalizar esta experiencia, los estudiantes serán capaces de <strong>desarrollar</strong> aplicaciones y recursos educativos interactivos y personalizados utilizando la metodología Vibe Coding y herramientas visuales, <strong>sin necesidad de conocimientos avanzados de programación</strong>, para enriquecer significativamente la experiencia de aprendizaje.
            </p>
        </section>

        <section id="que-es-vibe-coding" class="section-card">
            <h2 class="text-4xl font-bold text-gray-800 mb-6">¿Qué es Vibe Coding?</h2>
            <p class="text-lg text-gray-700 leading-relaxed mb-4">
                Vibe Coding es una metodología y un conjunto de herramientas que permiten la creación de aplicaciones y recursos interactivos, especialmente en el ámbito de la inteligencia artificial, de una manera intuitiva y accesible. Se centra en la "sensación" o "vibración" del código, haciendo que el proceso de desarrollo sea más fluido y menos dependiente de conocimientos técnicos profundos, ideal para la prototipación rápida y la experimentación.
            </p>
            <p class="text-lg text-gray-700 leading-relaxed mb-6">
                En esencia, Vibe Coding busca democratizar la creación tecnológica, permitiendo a usuarios con diferentes niveles de habilidad transformar sus ideas en realidad digital con mayor facilidad y creatividad.
            </p>
            <a href="https://en.wikipedia.org/wiki/Vibe_coding" target="_blank" class="btn-primary inline-flex items-center">
                Más sobre Vibe Coding en Wikipedia
                <i class="fas fa-external-link-alt ml-2"></i>
            </a>
        </section>

        <section id="vibe-coding-educacion" class="section-card">
            <h2 class="text-4xl font-bold text-gray-800 mb-6">Vibe Coding Aplicada a la Educación</h2>
            <p class="text-lg text-gray-700 leading-relaxed mb-4">
                En el ámbito educativo, Vibe Coding se convierte en una herramienta revolucionaria. Permite a educadores y estudiantes crear sus propios recursos didácticos interactivos, simulaciones, y aplicaciones con inteligencia artificial sin necesidad de ser expertos programadores. Esto abre un abanico de posibilidades para personalizar el aprendizaje y hacerlo más atractivo.
            </p>
            <p class="text-lg text-gray-700 leading-relaxed mb-6">
                Imagina crear un tutor virtual que se adapte al ritmo de cada estudiante, un simulador de laboratorio de física interactivo, o un juego de idiomas con reconocimiento de voz. Vibe Coding facilita la implementación de estas ideas, transformando el aula en un espacio de innovación y experimentación constante. El impacto es significativo: mayor motivación estudiantil, comprensión más profunda de conceptos complejos y desarrollo de habilidades del siglo XXI.
            </p>
            <a href="https://educacion.bilateria.org/como-crear-aplicaciones-educativas-con-inteligencia-artificial-para-integrarlas-en-tus-recursos-digitales" target="_blank" class="btn-primary inline-flex items-center">
                Descubre cómo crear apps educativas con IA
                <i class="fas fa-external-link-alt ml-2"></i>
            </a>
        </section>

        <section id="crea-juegos-ia" class="section-card">
            <h2 class="text-4xl font-bold text-gray-800 mb-6">Crea Juegos Educativos con IA sin Saber Programar</h2>
            <p class="text-lg text-gray-700 leading-relaxed mb-4">
                Una de las aplicaciones más emocionantes de Vibe Coding es la creación de juegos educativos. No necesitas tener experiencia en programación para empezar. El proceso es intuitivo y se basa en la lógica y la creatividad.
            </p>
            <h3 class="text-2xl font-semibold text-gray-700 mb-4">Proceso Simplificado:</h3>
            <ol class="list-decimal list-inside text-lg text-gray-700 mb-6 space-y-2">
                <li><strong class="text-blue-600">Define tu Idea:</strong> ¿Qué quieres que el juego enseñe? ¿Qué tipo de interacción tendrá?</li>
                <li><strong class="text-blue-600">Diseña la Lógica:</strong> Utiliza herramientas visuales para establecer reglas, condiciones y respuestas de la IA.</li>
                <li><strong class="text-blue-600">Añade Contenido:</strong> Incorpora tus preguntas, imágenes, sonidos y elementos interactivos.</li>
                <li><strong class="text-blue-600">Prueba y Mejora:</strong> Juega, obtén retroalimentación y ajusta para una experiencia óptima.</li>
            </ol>
            <p class="text-lg text-gray-700 leading-relaxed mb-6">
                Observa lo fácil que es en el siguiente video:
            </p>
            <div class="video-container mb-8">
                <iframe width="560" height="315" src="https://www.youtube.com/embed/XwF6r58SU1Y?si=ufu73AtWJ52rGp3b" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
            </div>
            <p class="text-lg text-gray-700 leading-relaxed">
                Con Vibe Coding, la creación de experiencias de aprendizaje interactivas y divertidas está al alcance de todos.
            </p>
        </section>

        <section class="section-card text-center">
            <h2 class="text-4xl font-bold text-gray-800 mb-6">¡Hora de Poner a Prueba tus Conocimientos!</h2>
            <p class="text-lg text-gray-700 leading-relaxed mb-6">
                Ahora que has explorado el potencial de Vibe Coding Educativo, te invitamos a verificar tu comprensión y a seguir profundizando con nuestros recursos adicionales.
            </p>
            <button id="show-quiz-btn" class="btn-primary inline-flex items-center text-xl px-8 py-4">
                Verifica tu Comprensión
                <i class="fas fa-question-circle ml-3 text-2xl"></i>
            </button>
        </section>

        <section id="quiz-interactivo" class="section-card hidden">
            <h2 class="text-4xl font-bold text-gray-800 mb-6">Verifica tu Comprensión: Quiz Interactivo</h2>
            <p class="text-lg text-gray-700 leading-relaxed mb-6">
                ¡Pon a prueba tus conocimientos sobre Vibe Coding Educativo con este quiz interactivo! Tienes 3 vidas.
            </p>

            <div id="quiz-container" class="bg-gray-50 p-6 rounded-lg shadow-inner border border-gray-200">
                <div class="flex justify-between items-center mb-6">
                    <div id="quiz-lives" class="text-red-500 text-2xl">
                        <i class="fas fa-heart"></i>
                        <i class="fas fa-heart"></i>
                        <i class="fas fa-heart"></i>
                    </div>
                    <div id="quiz-score" class="text-blue-600 font-bold text-2xl">Puntuación: 0</div>
                </div>

                <div id="quiz-progress" class="w-full bg-gray-200 rounded-full h-2.5 mb-6">
                    <div class="bg-green-500 h-2.5 rounded-full" style="width: 0%;"></div>
                </div>

                <div id="quiz-question" class="text-xl font-semibold text-gray-800 mb-6"></div>
                <div id="quiz-options" class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                    </div>

                <div id="quiz-feedback" class="text-center text-lg font-semibold mt-4 mb-4" style="min-height: 2rem;"></div>

                <button id="quiz-next-btn" class="btn-primary w-full mt-4 hidden">Siguiente Pregunta</button>
                <button id="quiz-start-over-btn" class="btn-outline w-full mt-4 hidden">Volver a Empezar</button>
            </div>
        </section>

        <section id="opinion-programador" class="section-card">
            <h2 class="text-4xl font-bold text-gray-800 mb-6">Vibe Coding en la Opinión de un Programador</h2>
            <p class="text-lg text-gray-700 leading-relaxed mb-6">
                ¿Qué piensan los expertos en código sobre Vibe Coding? Escucha la perspectiva de un programador sobre cómo esta metodología puede cambiar la forma en que abordamos el desarrollo y la enseñanza de la tecnología.
            </p>
            <div class="video-container mb-8">
                <iframe width="560" height="315" src="https://www.youtube.com/embed/ASG0iuMHp2I?si=fGV5jxLxSsBYjmv9" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
            </div>
            <p class="text-lg text-gray-700 leading-relaxed">
                Esta visión complementa la accesibilidad de Vibe Coding, mostrando su potencial tanto para principiantes como para profesionales experimentados.
            </p>
        </section>

        <section id="comunidad" class="section-card text-center">
            <h2 class="text-4xl font-bold text-gray-800 mb-6">Únete a la Comunidad Vibe Coding Educativo</h2>
            <p class="text-lg text-gray-700 leading-relaxed mb-6">
                ¿Quieres aprender más, compartir tus creaciones o colaborar con otros entusiastas? Te invitamos a unirte a nuestra comunidad en Telegram, creada por Juanjo de Haro. Es el lugar perfecto para conectar, resolver dudas y explorar nuevas ideas.
            </p>
            <a href="https://t.me/vceduca" target="_blank" class="btn-primary inline-flex items-center text-xl px-8 py-4">
                <i class="fab fa-telegram-plane mr-3 text-2xl"></i>
                Únete a la Comunidad en Telegram
            </a>
            <p class="text-sm text-gray-500 mt-4">¡Te esperamos para transformar juntos la educación con Vibe Coding!</p>
        </section>

        <section id="referencias" class="section-card">
            <h2 class="text-4xl font-bold text-gray-800 mb-6">Referencias</h2>
            <div class="space-y-4 text-lg text-gray-700">
                <p class="reference-item">
                    Coderos. (2025, marzo 20). <em>Vibe Coding: lo que debes saber</em> [Video]. YouTube. <a href="https://youtu.be/ASG0iuMHp2I" target="_blank" class="text-blue-600 hover:underline">https://youtu.be/ASG0iuMHp2I</a>
                </p>
                <p class="reference-item">
                    de Haro, J. J. (2025, enero 26). <em>Cómo crear aplicaciones educativas con inteligencia artificial para integrarlas en tus recursos digitales</em>. Bilateria. <a href="https://educacion.bilateria.org/como-crear-aplicaciones-educativas-con-inteligencia-artificial-para-integrarlas-en-tus-recursos-digitales" target="_blank" class="text-blue-600 hover:underline">https://educacion.bilateria.org/como-crear-aplicaciones-educativas-con-inteligencia-artificial-para-integrarlas-en-tus-recursos-digitales</a>
                </p>
                <p class="reference-item">
                    EdTrainer Tv. (2025, mayo 17). <em>Crea juegos educativos con IA sin saber programar | Vibe Coding explicado paso a paso</em> [Video]. YouTube. <a href="https://youtu.be/XwF6r58SU1Y" target="_blank" class="text-blue-600 hover:underline">https://youtu.be/XwF6r58SU1Y</a>
                </p>
                <p class="reference-item">
                    Wikipedia contributors. (2025, 28 de mayo). <em>Vibe coding</em>. Wikipedia. <a href="https://en.wikipedia.org/wiki/Vibe_coding" target="_blank" class="text-blue-600 hover:underline">https://en.wikipedia.org/wiki/Vibe_coding</a>
                </p>
            </div>
        </section>

    </main>

    <footer class="bg-gray-800 text-white py-8 text-center">
        <div class="container">
            <p>Recurso educativo creado por Juan Pablo Gómez Guízar con el valioso apoyo de Gemini.</p>
        </div>
    </footer>

    <div id="feedback-popup" class="fixed inset-0 flex items-center justify-center z-50 pointer-events-none hidden">
        <div class="bg-white p-6 rounded-xl shadow-2xl text-center transition-all duration-300 ease-out transform scale-90 opacity-0" id="popup-content">
            <p class="text-4xl mb-2" id="popup-emoji"></p>
            <p class="text-2xl font-bold" id="popup-message"></p>
        </div>
    </div>

    <audio id="correct-sound" preload="auto">
        <source src="https://www.soundjay.com/buttons/beep-01a.mp3" type="audio/mpeg">
        <source src="https://www.soundjay.com/buttons/beep-01a.wav" type="audio/wav">
        Your browser does not support the audio element.
    </audio>
    <audio id="incorrect-sound" preload="auto">
        <source src="https://www.soundjay.com/misc/fail-buzzer-02.mp3" type="audio/mpeg">
        <source src="https://www.soundjay.com/misc/fail-buzzer-02.wav" type="audio/wav">
        Your browser does not support the audio element.
    </audio>
    <audio id="win-sound" preload="auto">
        <source src="https://www.soundjay.com/misc/success-sound-01.mp3" type="audio/mpeg">
        <source src="https://www.soundjay.com/misc/success-sound-01.wav" type="audio/wav">
        Your browser does not support the audio element.
    </audio>
    <audio id="lose-sound" preload="auto">
        <source src="https://www.soundjay.com/misc/fail-buzzer-03.mp3" type="audio/mpeg">
        <source src="https://www.soundjay.com/misc/fail-buzzer-03.wav" type="audio/wav">
        Your browser does not support the audio element.
    </audio>
    <audio id="start-sound" preload="auto">
        <source src="https://www.soundjay.com/misc/ding-dong-01.mp3" type="audio/mpeg">
        <source src="https://www.soundjay.com/misc/ding-dong-01.wav" type="audio/wav">
        Your browser does not support the audio element.
    </audio>

    <script>
        // Quiz Data
        const quizQuestions = [
            {
                question: "¿Cuál es el objetivo principal de Vibe Coding, según la definición?",
                options: [
                    "Crear aplicaciones completes para grandes empresas.",
                    "Democratizar la creación tecnológica, haciéndola intuitiva y accesible.",
                    "Programar en lenguajes de bajo nivel para hardware.",
                    "Diseñar interfaces de usuario exclusivamente para móviles."
                ],
                correctAnswerIndex: 1
            },
            {
                question: "¿Qué tipo de recursos educativos se pueden crear con Vibe Coding en el ámbito educativo?",
                options: [
                    "Solo documentos de texto estáticos.",
                    "Simulaciones interactivas, tutores virtuales y juegos con IA.",
                    "Únicamente presentaciones de diapositivas.",
                    "Software de contabilidad empresarial."
                ],
                correctAnswerIndex: 1
            },
            {
                question: "¿Es necesario saber programar para crear juegos educativos con Vibe Coding?",
                options: [
                    "Sí, es indispensable tener un conocimiento profundo de varios lenguajes.",
                    "No, está diseñado para ser accesible sin experiencia en programación.",
                    "Solo si el juego incluye inteligencia artificial.",
                    "Solo si se desea publicar el juego en una tienda de aplicaciones."
                ],
                correctAnswerIndex: 1
            },
            {
                question: "¿Qué beneficio principal aporta Vibe Coding a la educación?",
                options: [
                    "Reduce la necesidad de profesores en el aula.",
                    "Aumenta la burocracia administrativa.",
                    "Personaliza el aprendizaje y lo hace más atractivo y motivador.",
                    "Limita la creatividad de los estudiantes."
                ],
                correctAnswerIndex: 2
            },
            {
                question: "¿Cuál de los siguientes es un paso simplificado en el proceso de creación de juegos con Vibe Coding?",
                options: [
                    "Aprender a depurar código en un entorno de desarrollo integrado.",
                    "Diseñar la lógica del juego utilizando herramientas visuales.",
                    "Compilar el código fuente en un ejecutable.",
                    "Configurar servidores de bases de datos."
                ],
                correctAnswerIndex: 1
            }
        ];

        // Quiz DOM Elements
        const quizContainerElement = document.getElementById('quiz-interactivo'); // The section containing the quiz
        const showQuizBtn = document.getElementById('show-quiz-btn');
        const quizQuestion = document.getElementById('quiz-question');
        const quizOptions = document.getElementById('quiz-options');
        const quizLives = document.getElementById('quiz-lives');
        const quizScore = document.getElementById('quiz-score');
        const quizProgress = document.getElementById('quiz-progress').firstElementChild;
        const quizFeedback = document.getElementById('quiz-feedback');
        const quizNextBtn = document.getElementById('quiz-next-btn');
        const quizStartOverBtn = document.getElementById('quiz-start-over-btn');

        // New DOM elements for feedback popup and sounds
        const feedbackPopup = document.getElementById('feedback-popup');
        const popupEmoji = document.getElementById('popup-emoji');
        const popupMessage = document.getElementById('popup-message');
        const correctSound = document.getElementById('correct-sound');
        const incorrectSound = document.getElementById('incorrect-sound');
        const winSound = document.getElementById('win-sound'); // New win sound element
        const loseSound = document.getElementById('lose-sound'); // New lose sound element
        const startSound = document.getElementById('start-sound'); // New start sound element

        // Quiz State
        let currentQuestionIndex = 0;
        let lives = 3;
        let score = 0;
        let selectedOption = null;
        let quizActive = true; // To prevent multiple clicks on options

        // Function to update the UI (lives, score, progress)
        function updateUI() {
            // Update lives display
            quizLives.innerHTML = '';
            for (let i = 0; i < 3; i++) {
                const heartIcon = document.createElement('i');
                heartIcon.classList.add('fas', 'fa-heart', 'mr-1');
                if (i < lives) {
                    heartIcon.classList.add('text-red-500');
                } else {
                    heartIcon.classList.add('text-gray-300');
                }
                quizLives.appendChild(heartIcon);
            }

            // Update score display
            quizScore.textContent = `Puntuación: ${score}`;

            // Update progress bar
            const progressPercentage = (currentQuestionIndex / quizQuestions.length) * 100;
            quizProgress.style.width = `${progressPercentage}%`;
        }

        // Function to load a question
        function loadQuestion() {
            if (currentQuestionIndex < quizQuestions.length && lives > 0) {
                quizActive = true; // Re-enable quiz interaction
                quizFeedback.textContent = ''; // Clear previous feedback
                quizNextBtn.classList.add('hidden'); // Hide next button

                const questionData = quizQuestions[currentQuestionIndex];
                quizQuestion.textContent = questionData.question;
                quizOptions.innerHTML = ''; // Clear previous options

                questionData.options.forEach((option, index) => {
                    const button = document.createElement('button');
                    button.textContent = option;
                    button.classList.add('quiz-option-btn');
                    button.dataset.index = index; // Store the index for checking
                    button.addEventListener('click', () => selectOption(button, index));
                    quizOptions.appendChild(button);
                });
                updateUI();
            } else {
                endQuiz();
            }
        }

        // Function to handle option selection
        function selectOption(button, index) {
            if (!quizActive) return; // Prevent interaction if quiz is not active (e.g., after an answer)

            // Deselect any previously selected option
            if (selectedOption) {
                selectedOption.classList.remove('selected');
                selectedOption.classList.remove('correct'); // Ensure previous correct/incorrect styles are removed
                selectedOption.classList.remove('incorrect');
            }
            // Select the current option
            button.classList.add('selected');
            selectedOption = button;

            // Immediately check the answer
            checkAnswer(index);
        }

        // Function to show the feedback popup
        function showFeedbackPopup(isCorrect) {
            feedbackPopup.classList.remove('hidden');
            feedbackPopup.classList.remove('feedback-popup-hidden'); // Ensure hidden animation is not active
            feedbackPopup.classList.add('feedback-popup-visible');

            if (isCorrect) {
                popupEmoji.textContent = '🎉';
                popupMessage.textContent = '¡Correcto!';
                popupMessage.classList.remove('text-red-600');
                popupMessage.classList.add('text-green-600');
                correctSound.currentTime = 0; // Rewind to start
                correctSound.play().catch(e => console.error("Error playing correct sound:", e)); // Add catch for debugging
            } else {
                popupEmoji.textContent = '😔';
                popupMessage.textContent = 'Incorrecto.';
                popupMessage.classList.remove('text-green-600');
                popupMessage.classList.add('text-red-600');
                incorrectSound.currentTime = 0; // Rewind to start
                incorrectSound.play().catch(e => console.error("Error playing incorrect sound:", e)); // Add catch for debugging
            }

            setTimeout(() => {
                feedbackPopup.classList.remove('feedback-popup-visible');
                feedbackPopup.classList.add('feedback-popup-hidden');
                // Hide after animation
                setTimeout(() => {
                    feedbackPopup.classList.add('hidden');
                }, 300); // Match animation duration
            }, 1200); // Display for 1.2 seconds
        }

        // Function to check the answer
        function checkAnswer(selectedIndex) {
            quizActive = false; // Disable further interaction until next question
            const questionData = quizQuestions[currentQuestionIndex];
            const correctIndex = questionData.correctAnswerIndex;

            // Apply visual feedback to all options
            Array.from(quizOptions.children).forEach((btn, idx) => {
                btn.removeEventListener('click', () => selectOption(btn, idx)); // Disable clicks after answer
                if (idx === correctIndex) {
                    btn.classList.add('correct');
                } else if (idx === selectedIndex) {
                    btn.classList.add('incorrect');
                }
            });

            if (selectedIndex === correctIndex) {
                score += 10; // Award points for correct answer
                quizFeedback.textContent = "¡Correcto! 🎉"; // Keep existing feedback
                quizFeedback.classList.remove('text-red-600');
                quizFeedback.classList.add('text-green-600');
                showFeedbackPopup(true); // Show correct popup
            } else {
                lives--; // Lose a life for incorrect answer
                quizFeedback.textContent = "Incorrecto. 😔"; // Keep existing feedback
                quizFeedback.classList.remove('text-green-600');
                quizFeedback.classList.add('text-red-600');
                showFeedbackPopup(false); // Show incorrect popup
            }

            updateUI(); // Update lives and score immediately
            quizNextBtn.classList.remove('hidden'); // Show next button
            // selectedOption is intentionally not reset here, so the selected option stays highlighted
        }

        // Function to move to the next question
        function nextQuestion() {
            currentQuestionIndex++;
            if (currentQuestionIndex < quizQuestions.length && lives > 0) {
                loadQuestion();
            } else {
                endQuiz();
            }
        }

        // Function to end the quiz
        function endQuiz() {
            quizQuestion.textContent = `¡Quiz Terminado! Tu puntuación final es: ${score} / ${quizQuestions.length * 10}`;
            quizOptions.innerHTML = ''; // Clear options
            quizFeedback.textContent = ''; // Clear feedback
            quizNextBtn.classList.add('hidden'); // Hide next button
            quizStartOverBtn.classList.remove('hidden'); // Show restart button

            if (lives <= 0) {
                quizFeedback.textContent = "¡Te has quedado sin vidas! Inténtalo de nuevo. 😢";
                quizFeedback.classList.remove('text-green-600');
                quizFeedback.classList.add('text-red-600');
                loseSound.currentTime = 0; // Rewind to start
                loseSound.play().catch(e => console.error("Error playing lose sound:", e)); // Add catch for debugging
            } else {
                quizFeedback.textContent = "¡Felicidades por completar el quiz! 🥳";
                quizFeedback.classList.remove('text-red-600');
                quizFeedback.classList.add('text-green-600');
                winSound.currentTime = 0; // Rewind to start
                winSound.play().catch(e => console.error("Error playing win sound:", e)); // Add catch for debugging
            }
        }

        // Function to reset the quiz
        function resetQuiz() {
            currentQuestionIndex = 0;
            lives = 3;
            score = 0;
            selectedOption = null;
            quizActive = true;
            quizStartOverBtn.classList.add('hidden');
            loadQuestion();
        }

        // Event Listeners
        quizNextBtn.addEventListener('click', nextQuestion);
        quizStartOverBtn.addEventListener('click', resetQuiz);

        // Event listener for the "Verifica tu comprensión" button
        showQuizBtn.addEventListener('click', () => {
            quizContainerElement.classList.remove('hidden'); // Show the quiz section
            showQuizBtn.classList.add('hidden'); // Hide the button itself once clicked
            resetQuiz(); // Initialize or reset the quiz
            startSound.currentTime = 0; // Rewind to start
            startSound.play().catch(e => console.error("Error playing start sound:", e)); // Add catch for debugging
            // Scroll to the quiz section for better UX
            quizContainerElement.scrollIntoView({ behavior: 'smooth', block: 'start' });
        });

        // Initial setup: Explicitly load audio elements when the DOM is ready
        document.addEventListener('DOMContentLoaded', () => {
            correctSound.load();
            incorrectSound.load();
            winSound.load();
            loseSound.load();
            startSound.load();
        });
    </script>
</body>
</html>